# Docker

![](https://pyrasis.com/assets/images/jHLsAlwaysUpToDateDocker/Unit01/2.webp)


어떤 프로그램을 설치하거나 작업을 할 때 분명히 시키는대로 따라했는데 안되는 경우가 종종 생기곤한다.

그럼 우리는 제일 처음상태로 돌려놓고 하나하나 짚어가며 다시 시도해본다.

이게 가장 쉬운방법이기도 하고 가장 빠른 방법이기도 하다.


그러나 매번 이렇게 진행사항을 다 날리고 다시 시도할 수는 없는 노릇이다. 설치된 것들을 삭제한다고 해도 남아있는 경우가 있고, 그러는 동안에 다시 꼬이는일이 생기기 때문이다. 그렇다면 더 큰 범위로 넘어가서 초기화를 해줘야한다. 극단적으로는 컴퓨터를 포멧해야 할지도 모른다. 

이런 부분에서 우리에게 편리함을 주는 것이 바로 도커이다.

도커는 로고와 이름으로 그 기능을 알 수 있는데 도커는 사전적 의미로 컨테이너를 하역하는 항만 노동자를 뜻한다. 그림에서도 고래가 컨테이너 박스를 여러개 싣고있다. 이는 서버가 여러개의 컨테이너를 적실행시킨다는 것으로 이해할 수 있다. 컨테이너에 물건을 싣는 것처럼 서비스 운영에 필요한 요소들을 모아 Docker컨테이너에 넣는다. 

실생활에서의 예를 들어보면 전에 학교 기관에서 미세조류를 생산하고 판매하는 사업을 했었다.

그래서 미세조류를 생산하는데 필요한 장비들을 컨테이너 안에 넣고
그 컨테이너 통째로 수출했었다. 환경에 따라 생산량이 달라지거나 생산이 실패할 수 있기 때문에 하나의 격리된 컨테이너에서 환경을 세팅한 후 컨테이너 그대로 수출했던 것이다.

도커란 컨테이너기반의 가상화 시스템이다. 위의 예시처럼 각기 다른 로컬 환경에 영향을 받지 않게 가상 환경을 만들고 사용하는 것이다.

우선 가상화 시스템이란 실제론 없는데 있는 것처럼 보이게 하는 것이다.

예를 들어 하드디스크를 나누어 c드라이브와 d드라이브로 나누는 것을 예로 들 수 있다. 실제론 하나의 하드 디스크만 있을뿐인데 말이다.
![이미지](https://pyrasis.com/assets/images/jHLsAlwaysUpToDateDocker/Unit01/5.webp)

이런 가상화 기술을 이용해서 여러개의 운영체제를 쓸 수 있다. 윈도우에서 리눅스를 쓸 수 있고 윈도우 안에서 윈도우도 역시 쓸 수 있게 된다. 그러나 가상 머신 자체는 완전한 컴퓨터라 이런 경우 여러개의 다른 운영체제를 동시에 돌리기에 속도저하가 나타나게 되고 이미지 파일에 운영체제 파일이 있기 때문에 무겁다.

이런 문제를 해결하고자 등장한 것이 컨테이너 기반 가상화 기술이다.

도커는 각각의 개별 os를 돌리지 않고 도커를 설치하고 리눅스라는 하나의 OS 위에 컨테이너를 올려 어떤 조건에서도 동일한 환경에서 작업을 할 수 있다.

도커는 이미지를 사용하는데 이 이미지라는 것은 특정 프로세스를 실행시키는데 필요한 여러 파일들과 설정값들을 모아놓은 것이다.
이 이미지를 가져와 실행을 시키고 만약 이유모를 오류가 난다면 그 컨테이너를 날리고 다시 만들어 진행할 수 있는 것이다.



도커 없이 프로그램을 받을 때 순서

인스톨러 -> 실행 -> 설치완료

서버, 설치버전, 운영체제등에 따라 에러가 발생한다.

도에서 cli에 커멘드를 입력한다

도커서버는 커멘드를 받아서 모든 작업을 하게된다.

예를 들어 redis를 설치한다고 하면

redis 홈페이지 -> 설치

그러나 wget이라는 커멘드가 없다는 에러가 발생한다.

그래서 redis를 설치하기 위해 wget을 먼저 설치하고 redis를 설치해아한다.

이처럼 어떤 프로그램을 받을 때 부수적인 것들을 설치해야하고 꼬일 수 있다.

그러나 도커를 사용하면 명령어 하나로 받을 수 있다.

도커를 사용하면 예상치 못한 에러가 줄어들고 설치도 편해진다.

위에서 말한 것처럼 이미지를 내려받고 문제가 생기면 컨테이너를 날리고 다시 처음부터 진행하면 된다.

도커 이미지는 응용 프로그램을 실행하는데 필요한 모든 것을 포함하고있다.

도커이미지가 가져야할 것들은 무엇이 있을까

예를 들어 컨테이너에서 카카오톡을 실행하고싶다면?

컨테이너가 시잘될 때 실행되는 명령어

파일 스냅샷

컨테이너 시작시 카카오톡을 실행시켜야하고(명령어) 카카오톡 파일(파일 스냅샷)이 필요하다.

이미지로 컨테이너를 만드는 순서

도커 클라이언트에 docker run 이미지

컨테이너에서 실행시켜주기 위해 도커 이미지에있는 파일 스냅샷을 컨테이너 하드 디스크에 옮겨준다.

컨테이너가 실행되면 

