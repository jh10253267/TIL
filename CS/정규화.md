# 정규화

## 개요

정규화란 관계형 데이터 모델에서 데이터 중복성을 제거하여 이상현상을 방지하고 데이터의 일관성과 정확성을 유지하기 위해 무손실 분해하는 과정이다.

## 이상 현상

이상현상이란 데이터의 중복성으로 인해 릴레이션을 조작할 때 발생하는 비합리적인 현상이다.

예를 들어 다음과 같은 테이블이 있다고 해보자.
 
학번 | 이름 | 학부 | 과목번호 | 점수 
--|--|--|--|--
201501 | 홍길동 | 컴퓨터공학 | 1 | A+
201501 | 홍길동 | 컴퓨터공학 | 2 | B+
201502 | 김영희 | 전자공학 | 3 | A
201503 | 김철수 | 기계공학 | 4 | A+
201504 | 이희선 | 생명공학 | 5 | A

하나의 테이블에서 학생 정보와 과목 정보를 같이 관리하고있다.

만약 새로운 학생인 201505학번 이기석을 등록한다고 해보자.

기본키는 학번과 과목번호로 구성되어있다. 이런 상황에서 과목번호가 지정되지 않는다면 학생 정보도 삽입할 수 없게된다.

> **삽입 이상**이란 새 데이터를 삽입할 때 불필요한 세부정보를 입력해야하는 경우를 말한다.

만일 학생이 해당 과목을 수강취소한다면 학생 정보도 같이 삭제된다.

> **삭제 이상**이란 정보 삭제시 원치 않는 다른 정보가 같이 삭제되는 경우를 말한다.

또한 홍길동 학생이 전자공학과로 전과를 하는 경우 모든 데이터를 변경하지 않고 일부만 변경하는 경우 해당 학생이 컴퓨터공학과인지 전자공학과인지 알 수 없는 문제가 생긴다.

> **갱신 이상**이란 중복 데이터 중에서 특정 부분만 수정되어 중복된 값이 모순을 일으키는 경우를 말한다.

이러한 이상현상을 방지하는 절차가 정규화이다.

## 정규화

정규화 단계에는 총 6가지가 있다.
### 1차 정규화

1차 정규화는 테이블 내의 속성값은 원자값으로 구성되어야한다는 것이다.

예를 들면 이런식이다.

고객ID | 이메일
--|--
1 | wnsgur@korea.com; wnsgur1@korea.com;

이렇게 되면 1차 정규화에 어긋난다.

고객ID | 이메일
--|--
1 | wnsgur@korea.com
1 | wnsgur1@korea.com

### 2차 정규화

2차 정규화는 부분 함수 종속을 제거하는 것을 말한다.

고객명| 프로그램 | 가격 | 이용 기간
--|--|--|--
홍길동 | 헬스 | 30000 | 1달
장길산 | 필라테스 | 300000 | 2달

고객명과 프로그램이 기본키로 이들이 프로그램 이용 기간에 영향을 주고 프로그램은 가격에 영향을 주는 관계가 생긴다.

쉽게 말하면 기본키가 2개인 상황인데 프로그램만 알아도 가격이 결정된다. 이런 관계를 부분함수 종속 관계라고 한다.

따라서 이를 분리하자면 이렇다.

고객명| 프로그램 | 이용 기간
--|--|--
홍길동 | 헬스 | 1달
장길산 | 필라테스 | 2달

프로그램 | 가격
--|--
헬스 | 30000
필라테스 | 300000

### 3차 정규화

A가 B이면 B는 C인 관계를 이행함수 종속 관계라고 한다.

책번호 | 도서 이름 | 도서 가격 | 출판사 | 홈페이지
--|--|--|--|--
1 | C언어 | 30000 | A사 | www.a.com
2 | 자바를 잡아 | 32000 | B사 | www.b.com
3 | 파이썬의 정석 | 25000 | B사 | www.c.com

책 번호가 출판사에 영향을 주고 출판사가 홈페이지에 영향을 준다.

책번호 -> 출판사

출판사 -> 홈페이지

이를 제거하자면 이렇다.

책번호 | 도서 이름 | 도서 가격 
--|--|--
1 | C언어 | 30000 
2 | 자바를 잡아 | 32000
3 | 파이썬의 정석 | 25000

출판사 | 홈페이지
--|--
A사 | www.a.com
B사 | www.b.com


### 보이스-코드 정규화(BCNF)

학번 | 과목명 | 교수명
--|--|--
201501 | C언어 | 장길산
201502 | 데이터베이스 | 홍길동
201503 | 데이터베이스 | 홍길동

학번 | 교수명
--|--
201501 | 장길산
201502 | 홍길동
201503 | 홍길동

교수명 | 과목명
--|--
장길산 | C언어
홍길동 | 데이터베이스

보이스-코드 정규화란 결정자 후보키가 아닌 함수 종속관께를 제거하는 것이다.

학번과 과목명이 교수명에 영향을 주고 교수명이 과목명에 영향을 주는 관계로 교수명은 과목명에 영향을 주지만 한 테이블에 같이 존재하고 교수명은 키가 아닌 상황이기 때문에 교수명이 후보 키가 아니다.

따라서 교수명과 과목명 테이블로 분리하여 교수명이 후보키 역할을 할 수 있게 하여 보이스 코드 정규화를 만족시킨다.


