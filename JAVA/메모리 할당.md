# 객체의 메모리 할당 방법

Student s = new Student();

위와 같이 new 키워드를 사용해서 객체를 만들면 Java 가상머신은 코드를 읽고 메모리가 얼마나 필요한지 계산하여 힙에 할당한다. 그리고 힙에 있는 공간을 가리키는 4바이트 포인터를 만든다.

만약 하위 클래스를 만들면 Java 가상머신은 이 클래스가 상위 클래스를 상속받고 있음을 인지하고 상위 클래스에 있는 변수와 메소드를 모두 가져온다.

특징1. Java에서 각각의 클래스는 하나의 클래스만 상속받을 수 있다.

여러개의 클래스를 상속받아 사용한다면 어떤 문제가 발생할까?

만약 A라는 클래스와 B라는 클래스를 상속받는 경우를 생각해보자.

A라는 클래스에도 name이라는 변수가 있고 B라는 클래스에도 name이라는 클래스가 있다고 했을 경우 둘 중 어느 것을 의미하는지 알 방법이 없다. 따라서 Java에선 다중 상속을 허용하지 않고있다.

특징 2. 상속받는 클래스의 정보만 갖고 있다. 즉 자신을 상속 받고 있는 클래스의 정보는 알지 못한다.

특징 3. 상속받는 클래스의 공간을 함께 할당한다.

Student s = new Student();

상속을 받은 상태로 새로운 객체를 생성하면 s에는 4바이트가 할당된다. 그리고 이 포인터가 가르키는 힙에는 Student에 맞는 공간이 할당된다. 이 때 만일 Student클래스가 다른 클래스를 상속받고 있다면 그 클래스에 들어있는 모든 변수 또한 힙에 들어간다.

이런 구조를 잘 생각해보면 알 수 있는 점은 다음과 같다.

Student s = new 하위클래스();

하위클래스 u = new Student(); 

첫 번째 코드는 하위클래스 객체에 필요한 만큼의 공간을 할당받기 때문에 Student의 변수도 모두 알 수 있다. 따라서 Student 클래스의 변수를 파악하고 메모리를 계산할 수 있다. 

두 번째 코드의 경우 힙에 할당되는 공간은 Student만큼이다. 따라서 하위 클래스의 정보를 알지 못하기 때문에 컴파일 에러가 난다.
