# React

## 개요

리엑트란 무엇이고 왜 필요할까?

전에 브라우저가 페이지를 그리는 방법에 대해 정리한 적이 있다.

## 개요

리엑트는 사용자 인터페이스를 만들기 위한 자바스크립트 라이브러리이다.

주로 인터렉션이 많은 웹 앱을 개발하기 위해서 주로 사용된다.
비슷하게 언급되는 개념으로는 뷰와 앵글러가 있다.

리액트는 프레임워크가 아닌 라이브러리이다.

전적으로 UI를 렌더링 하는데 관여하기 때문이다.

리엑트는 뷰를 렌더링 하는 라이브러리이다
그렇다면 우리가 다른 페이지로 이동하는 등의 액션은 어떻게 처리하는가? 리엑트 라우터 돔 모듈을 사용하며 상태관리를 위해서 리덕스 몹스 등 여러 모듈을 사용한다.

## 리엑트를 사용하는 이유

여러 기업들이 리엑트를 사용하고 있고 국내 주요 기업들도 프론트엔드 개발을 위해서 리엑트를 사용하고있다.

상대적으로 배우기 쉬운 라이브러리,
여러 기능들을 위해 이미 만들어져있는 라이브러리 환경,
많은 기업들의 사용으로 검증이된 라이브러리의 이유가 있다.

## 컴포넌트

리엑트는 여러 컴포넌트를 이용해서 개발한다.

컴포넌트란 리엑트로 만들어진 앱을 이루는 최소한의 단위를 말한다.

하나의 페이지안에는 여러 부분들이 존재한다. 검색, 프로필, 스토리, 포스트 등등..

이라한 부분들이 조합되어 하나의 웹 페이지를 구성하게된다.

이렇게 나누어진 컴포넌트들은 다른 페이지에서도 재사용할 수 있다.

협업을 할 때 각자 맡은 컴포넌트를 서로의 컴포넌트에 영향을 받지 않게 병렬적으로 작업할 수 있다.

리액트 컴포넌트는 두가지가 있다.

* 클래스형
* 함수형

원래는 클래스형을 많이 사용했지만 리엑트에서 훅이라는 개념이 나온 뒤론 함수형 컴포넌트를 이용해서 개발하는 경우가 많다.

## Node.js

리엑트 프로젝트를 만들기 위해선 노드js와 npm을 설치해야한다.

이는 프로젝트를 개발할 때 사용하는 주요 도구들이 노드js를 사용하기 때문이다.

## 가상돔

웹 페이지 빌드과정

웹 브라우저가 html문서를 읽고 스타일을 입히고 뷰포트에 표시하는 과정을 거친다.(CRP)

먼저 브라우저의 렌더링 엔진이 html구조를 파악하고 dom트리를 그린다. css도 dom트리와 연관되어있기 때문에 cssdom을 그리고 두 트리를 합친다.

화면에 보여지는 컨텐츠와 스타일 정보를 모두 포함하는 최종 렌더링 트리를 출력한다.

그리고 layout단계로 넘어간다.

페이지에 표시되는 요소들의 크기와 위치를 계산하는 단계이다.

그리고 실제 화면에 보이게된다.

문제점은 어떤 상호작용에 의해서 dom에 변화가 발생하면 렌더링을 다시한다. 즉 위의 과정을 다시 반복하는 것이다. 비용이 매우 비싼 작업이다.

인터렉션이 많다면 작은 변화로도 현재 페이지를 다시 그리기때문에 비효율적이고 성능저하로 이어질 수 있다.

그래서 가상 돔이라는 개념을 이용해 최소한의 렌더링만 수행한다.

데이터가 바뀌면 가상돔에 렌더링되고 이전에 생긴 가상돔과 비교해서(Diffing) 바뀐 부분만 실제 돔에 적용을 시켜준다(Reconciliation).

만약 30개의 요소개 변하였다고 하더라도 한 번의 실제 돔 수정으로 처리하게된다.

## 리엑트 설치방법

최근에는 npx create-react-app 폴더이름 명령어를 실행하여 간단하게 리엑트를 사용할 수 있다.

그전에는 좀더 복잡한 설정이 필요했다.

웹팩이란?

번들러 여러개로 나누어져있는 파일들을 하나의 자바스크립트코드로 압출하고 최적화하는 라이브러리이다.

여러 파일의 자바스크립트 코드를 압축하여 최적화할 수 있기에 로딩에 대한 네트워크 비용을 줄일 수 있고

모듈 단위로 개발이 가능하며 가독성과 유지보수가 쉽다.

바벨이란?

프론트엔드 개발을 할 때 중요한 것들중 하나가 바로 크로스브라우징이다. 예를 들어 자바스크립트 es6문법인 화살표함수는 인터넷 익스플로러에선 작동하지 않는다.

이러한 걱정을 완화시켜주는 것이 바로 바벨로 바벨이란 최신 자바스크립트 문법을 구형 브라우저에서도 작동할 수 있게 변환시켜주는 라이브러리이다.

이러한 부분들이 내장되어있는 것이 create-react-app패키지이다.

npx란 노드 패키지 실행을 도와주는 도구이다. 굉장히 많은 라이브러리들이 npm레지스트리라는 곳에 존재하는데 npx는 npm레지스트리에있는 create-react-app패키지를 가져와서 리엑트를 우리 로컬에 설치해서 사용할 수 있다. 


## 프로젝트 기본 구조

리엑트를 설치하면 마치 인텔리제이같은 IDE를 사용할 때 처럼 .ginignore와 같은 파일들이 디폴트로 들어있는 것을 볼 수 있다.

이중에서 중요한 부분이 public/index.html(기본 페이지 템플릿)과 src/index.js이다. 이들의 이름은 수정되어선 안된다.

src폴더 

대부분의 리엑트 소소코드들은 이곳에 작성하면 된다.

js파일과 css파일들.

웹팩의 번들링 대상은 src폴더이다. 

package.json 해당 프로젝트에 대한 정보들이 들어있는 파일이다.

라이브러리의 버전과 프로젝트 이름, 테스트할 때 사용할 스크립트 등이 명시되어있다.

## 실행해보기

npm run start

명령어를 실행하여 리엑트 앱을 시작할 수 있다.

프로그래밍 언어를 처음 배울 때 Hello World!!를 출력해보는 것 처럼 간단하게 조작해볼 수 있다.

index.html파일을 보면 id가 root인 div요소가 보이고 이 id값은 index.js에서 사용한다.

그리고 App.js 안에서 메인화면을 렌더링해서 메인페이지가 보인다.

간단하게 바꿔볼 수 있는 부분은 App.js 안에 있는 문구들이다.

Learn React 부분의 문구를 원하는 문구로 바꾸어서 실행해보면 실제 출력된 결과물에서도 문구가 바뀌어있는 것을 볼 수 있다.

## SPA

Single Page Application의 약자이다.

처음 html/css를 배울 때 우리는 메인페이지 html파일, 로그인 html파일과 같은식으로 보여지는 화면마다 파일을 만들었다. 그러나 요즘에는 웹사이트의 전체 페이지를 하나의 페이지에 담아 동적으로 화면을 바꿔가며 표현하는데 이를 SPA라고한다.

그렇다면 어떻게 화면의 변경이 일어나는지 궁금할 수 있다.

이는 HTML5의 History API라는 것을 이용한다.
자바스크립트 영역에서 History API를 이용해서 현재 페이지 내에서 마치 화면 이동이 일어난 것처럼 작동하게해준다.

하나 예로 들자면

History.back() : 세션 기록의 바로 뒤 페이지로 이동하는 비동기 메소드로 브라우저의 뒤로가기 버튼을 누르는 것과 같은 효과이다.

