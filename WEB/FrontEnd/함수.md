# 함수

## 함수 선언
자바스크립트에서 함수를 선언하는 방법은 다음과 같다.

```js
function sample() {
 console.log("!!");
}
```

`function`키워드를 사용하고 그 다음 함수의 이름을 적어준다.

다른 방법도 있는데 다음과 같다.

```js
const sample = function() {
  console.log("!!");
}
```

첫번째를 함수 선언문이라고 부르고 두번째 방법을 함수 표현식이라고 부른다.

이 둘은 선언 방법과 호출방법뿐만아니라 성질적인 차이도 있는데 바로 호이스팅이라는 개념이다.

예를 들어보면 다음과 같다.
```js
sample();

function sample() {
  console.log("!!");
}
```

일반적인 프로그래밍 언어라면 함수의 선언부 이전에 호출을 하니 에러가 발생할 것이다.

그러나 실제 실행을 시켜보면 정상적으로 작동한다.

이는 호이스팅때문인데 호이스팅이란 함수가 선언된 부분 내에서 유효한 범위 안에서 제일 꼭대기로 끌어올려서 동작하는 개념을 말한다.

이는 함수표현식방식의 선언에는 작동하지 않는다.

```js
sample();

const sample = function () {
  console.log("!!");
}
//에러 발생.
//메시지 : 함수가 초기화되기 전에 접근할 수 없다.
```

함수란 복잡한 실제 구현을 감추고 추상화한 개념이기 때문에 자세한 함수 구현 내용을 먼저 읽을 필요는 없다. 그래서
자바스크립트 코드를 작성할 때 이러한 현상을 이용해서 자세한 구현부 코드는 밑에 작성하는 방식으로 작성하곤 하는 것이다.

## 반환

js함수에서 데이터를 반환하는 방법은 return키워드를 이용하는 것이다.

```js
function sample() {
  return "!!";
}

console.log(sample()); // !!
```

코드를 직관적으로 보면 sample함수는 "!!"라는 키워드를 반환하고 있으므로 sample()호출부가 리턴값으로 대체된다 라고 이해할 수도 있을 것이다.

return 키워드는 무언가를 반환하는 역할뿐만 아니라 함수의 흐름을 끊는 역할도 한다.

예를 들어 특정 조건에서 실행조건을 만족하지 않는다면 if문과 return을 사용하여 동작을 중지시킬 수도 있다.

다음과 같은 경우를 예로 들 수 있겠다.

plus라는 함수는 숫자를 입력받아 1을 더한 값을 리턴하는 함수이다.

그러나 개발자의 의도와 다르게 number타입이 아닌 값이 들어갈 경우 리턴값은 NaN일 것이다. 이를 방지하고자 조건을 추가하는 것이다.

다음의 코드는 num을 입력받고 숫자타입이 아니라면 실행을 종료하는 코드이다.

```js
function plus(num) {
  if(type of num !== 'number') {
  return;
}
return num + 1;
```

## 매개변수 패턴

```js
function sum(a, b) {
  return a + b;
}
```

위의 코드에서 숫자 하나만 입력한다면 NaN이 반환된다. 그럼 이럴 경우 기본 값을 설정해줄 수 있는 방법이 있다.

```js
function sum(a, b = 1) {
  return a + b;
}
```

위의 함수에서 인자를 하나만 넣어준다면 문제없이 작동한다.

```js
const user = {
  name: "username",
  age: 25
}

//구조 분해 할당
function getUser({ name }) {
  return name;
}
console.log(getUser(user));
//username
```
아래와 같은 동작도 가능하다. 

getSecondItem에 배열 데이터를 넣어주고 있고 리턴값은 배열의 두번째 요소인 Banana이다. 이 역시 구조 분해 할당이다.

여기서 a와 c는 실제 함수 내부에서 쓰이지 않으니 제거해도 좋으나 배열의 두번째 데이터를 의미하는 b앞에 쉼표는 남겨두어야한다.

```js
const fruit = ['Apple', 'Banana', 'Cherry']

//배열 구조분해 할당
function getSecondItem([a, b, c]) {
  return b;
}

/*
function getSecondItem([, b]) {
  return b;
}
/*

console.log(getSecondItem(fruits));
```

### 나머지 매개변수

숫자를 입력하고 입력된 숫자들을 모두 더해서 리턴해주는 함수가 있다고 해보자. 함수의 인자가 몇 개가 필요할까? 범용적으로 사용할 수 있으려면 함수의 인자가 두개일 때 세개일 때 혹은 그 이상의 숫자들을 덧셈할 때. 이 처럼 다양한 경우의수가 생기게 된다. 이런 경우 유용한 것이 바로 나머지 매개변수라는 개념이다.

사용방법은 다음과 같다.

```js
//...rest라는 매개변수는 인자를 배열로 받는다.
function sum(...rest) {
  console.log(rest);
}
//아래와 같이 사용할 수도 있다.
/* function sum(a, b, ...rest) {
  console.log(rest);
}
*/

console.log(sum(1, 2));
```

sum함수를 마저 완성해보자면 배열 데이터를 받아서 모두 더하는 로직이 필요하다. 이 때 사용할 수 있는 것이 바로 reduce라는 함수이다.

reduce는 데이터를 더하는, 결합시키는 함수라고 할 수 있겠다.

인자로 이전 데이터 축적본과 현재 데이터를 받고 이를 결합시킨다. 그리고 이 결과를 리턴하면 다시 acc라는 변수로 들어가게된다. 이러한 작동 방식을 가진다.

```js
function sum(...rest) {
  return rest.reduce(function (acc, cur){
    return acc + cur
  }, 0) 
}
```

reduce는 템플레이팅시 사용할 수 있다. 예를 들어 게시글 조회 페이지에서 서버에 요청해서 데이터를 받아온다면 요소.innerText = response.text와 같이 사용할 수 있다. 그러나 게시글 조회 페이지에는 댓글도 존재한다. 이럴 경우 템플레이팅된 데이터들을 결합시키서 그 결과를 템플레이팅시킬 수 있다.

## 화살표 함수

위에서 공부해본 함수 선언 방식은 두 가지가 있었다.
함수 선언문과 함수 표현식. 그러나 이 두 가지 말고도 다른 표현 형식으로 함수를 정의할 수 있는데 바로 화살표 함수라는 개념이다.

화살표 함수는 ECMAScript는 ES2015에서 나온 문법으로 좀 더 간단하게 함수를 작성할 수 있다.

```js
// function sum(a, b) {
//   return a + b
// }

// 화살표 함수 표현
const sum = (a, b) => {
return a + b;
}

console.log(sum(1, 2));
```

화살표 함수의 특징중 하나가 리턴 키워드로 로직이 시작하는 경우에 리턴 키워드와 중괄호를 생략할 수 있다는 것이다.

바로 이렇게.
```js
// const sum = (a, b) => {
//   return a + b;
// }

//매개변수가 하나라면 소괄호를 생략해도 좋다.
const sum = (a, b) => a + b
```

```js
const print = () => {return {a:1}}
```
위의 경우에서는 로직이 return으로 시작하지만 생략하면 안된다. 
중괄호와 return키워드를 생략해버리면 자바스크립트에는 없는 a:1이라는 문법이 생기기 때문이다.

이런 경우에는 데이터를 소괄호로 한 번 감싸주면 된다.

## 즉시 실행 함수
다음과 같은 함수가 있다고 해보자.

그리고 함수를 선언하고 바로 호출하고싶은 경우를 가정해본다.

```js
const a = 7
const double = () => {
  console.log(a * 2);
}
```